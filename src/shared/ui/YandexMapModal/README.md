# üó∫Ô∏è YandexMapModal

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–æ–π.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import { YandexMapModal } from '@/shared/ui/YandexMapModal';
import { useState } from 'react';

function MyComponent() {
  const [isMapOpen, setIsMapOpen] = useState(false);

  return (
    <>
      <button onClick={() => setIsMapOpen(true)}>–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</button>

      <YandexMapModal
        isOpen={isMapOpen}
        onClose={() => setIsMapOpen(false)}
        address="–ø–≥—Ç. –†–æ—â–∏–Ω–æ, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 4"
        coordinates={[60.258207, 29.598024]}
      />
    </>
  );
}
```

## Props

| Prop          | Type               | Default                           | Description                           |
| ------------- | ------------------ | --------------------------------- | ------------------------------------- |
| `isOpen`      | `boolean`          | Required                          | –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞    |
| `onClose`     | `() => void`       | Required                          | Callback –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ |
| `address`     | `string`           | `"–ø–≥—Ç. –†–æ—â–∏–Ω–æ, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 4"` | –ê–¥—Ä–µ—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è                 |
| `coordinates` | `[number, number]` | `[60.258207, 29.598024]`          | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã [—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞]          |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è API –∫–ª—é—á–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç.

**–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - —Å–æ–∑–¥–∞–π—Ç–µ `.env.local`:

```env
NEXT_PUBLIC_YANDEX_MAPS_API_KEY=your-api-key-here
```

**Production** - –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ `docker-compose.yml`:

```yaml
environment:
  - NEXT_PUBLIC_YANDEX_MAPS_API_KEY=${NEXT_PUBLIC_YANDEX_MAPS_API_KEY}
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞:** —Å–º. `ENV_TEMPLATE.md` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ API

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API 2.1 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ –æ—á–∏—â–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ API –∫–ª—é—á –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ö–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞—Ö" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ

### –û—Ç–ª–∞–¥–∫–∞

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å:

```
–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ä—Ç—É...
API Key: your-key...
Coordinates: [60.258207, 29.598024]
–°–∫—Ä–∏–ø—Ç –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç –∑–∞–≥—Ä—É–∂–µ–Ω
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É...
API –≥–æ—Ç–æ–≤, —Å–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
–ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ
```

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console).

## –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `[—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞]`.

**–ö–∞–∫ –Ω–∞–π—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://yandex.ru/maps/
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí "–ß—Ç–æ –∑–¥–µ—Å—å?"
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–æ–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: —à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)

–ü—Ä–∏–º–µ—Ä:

```tsx
coordinates={[60.258207, 29.598024]}
// 60.258207 - —à–∏—Ä–æ—Ç–∞ (latitude)
// 29.598024 - –¥–æ–ª–≥–æ—Ç–∞ (longitude)
```

## –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CSS –º–æ–¥—É–ª–∏ (`YandexMapModal.module.scss`).

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã:

- `.mapModal` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
- `.mapContainer` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- `.mapHeader` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- `.map` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã (400px –≤—ã—Å–æ—Ç–∞)
- `.errorContainer` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—à–∏–±–∫–∏

–î–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `className` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Modal`.

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API –≤–µ—Ä—Å–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API **2.1** (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è) –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### TypeScript

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.ymaps` –æ–±—ä—è–≤–ª–µ–Ω –≤ —Ñ–∞–π–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### Next.js

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–º–µ—á–µ–Ω `'use client'` –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–Ω–µ SSR).

## Troubleshooting

### –ö–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ "API –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω!"

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `NEXT_PUBLIC_YANDEX_MAPS_API_KEY` (—Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `NEXT_PUBLIC_`)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.env.local` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### –û—à–∏–±–∫–∞ CORS

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–æ–Ω—Å–æ–ª–∏ –æ—à–∏–±–∫–∏ CORS –æ—Ç –Ø–Ω–¥–µ–∫—Å API

**–†–µ—à–µ–Ω–∏–µ:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://developer.tech.yandex.ru/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –∫–ª—é—á
3. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
4. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ `localhost`

### –ö–∞—Ä—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ production –∫–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `docker-compose.yml` (–≤ —Å–µ–∫—Ü–∏—é `environment`)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker compose up -d --build`
4. –î–æ–±–∞–≤—å—Ç–µ production –¥–æ–º–µ–Ω –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ø–Ω–¥–µ–∫—Å

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í —Ñ—É—Ç–µ—Ä–µ (—Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

–°–º. `src/widgets/Footer/Footer.tsx`:

```tsx
const [isMapModalOpen, setIsMapModalOpen] = useState(false);

<button onClick={() => setIsMapModalOpen(true)}>
  üìç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
</button>

<YandexMapModal
  isOpen={isMapModalOpen}
  onClose={() => setIsMapModalOpen(false)}
  address="–ø–≥—Ç. –†–æ—â–∏–Ω–æ, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 4"
  coordinates={[60.258207, 29.598024]}
/>
```

### –° –¥—Ä—É–≥–∏–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏

```tsx
<YandexMapModal
  isOpen={isOpen}
  onClose={handleClose}
  address="–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 1"
  coordinates={[55.753544, 37.621211]}
/>
```

## –°–º. —Ç–∞–∫–∂–µ

- `ENV_TEMPLATE.md` - –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
- `YANDEX_MAPS_FIX.md` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã](https://yandex.ru/dev/maps/jsapi/doc/2.1/)
